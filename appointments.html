<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointments - Prince Alex Hospital HMS</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBYfTWtl-N21DxVATxVnhCofgQsVu3xK4M",
            authDomain: "store-e88d9.firebaseapp.com",
            projectId: "store-e88d9",
            storageBucket: "store-e88d9.firebasestorage.app",
            messagingSenderId: "30797525855",
            appId: "1:30797525855:web:335287605ec648f747fcea"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
    </script>
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>üè• Prince Alex Hospital</h1>
                <h2>Hospital Management System (HMS)</h2>
            </div>
            <div class="user-info">
                <h3 class="welcome-message">Welcome User</h3>
                <p>Department</p>
            </div>
        </div>
        
        <div class="main-content">
            <div class="content-header">
                <h1>üìÖ Appointment Scheduling</h1>
                <p>Schedule, manage, and track patient appointments</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    Schedule New Appointment
                </div>
                <div class="card-body">
                    <form id="appointmentForm">
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="patientName">Patient Name:</label>
                                    <input type="text" id="patientName" name="patientName" required>
                                </div>
                                <div class="form-group">
                                    <label for="patientAge">Patient Age:</label>
                                    <input type="number" id="patientAge" name="patientAge" min="0" max="120" required>
                                </div>
                                <div class="form-group">
                                    <label for="patientGender">Patient Gender:</label>
                                    <select id="patientGender" name="patientGender" required>
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="patientContact">Contact Number:</label>
                                    <input type="tel" id="patientContact" name="patientContact" required>
                                </div>
                                <div class="form-group">
                                    <label for="appointmentDate">Appointment Date:</label>
                                    <input type="date" id="appointmentDate" name="appointmentDate" required>
                                </div>
                                <div class="form-group">
                                    <label for="appointmentTime">Appointment Time:</label>
                                    <input type="time" id="appointmentTime" name="appointmentTime" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="selectedDoctor">Doctor:</label>
                                    <select id="selectedDoctor" name="selectedDoctor" required>
                                        <option value="">Select Doctor</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="department">Department:</label>
                                    <select id="department" name="department" required>
                                        <option value="">Select Department</option>
                                        <option value="Cardiology">Cardiology</option>
                                        <option value="Neurology">Neurology</option>
                                        <option value="Pediatrics">Pediatrics</option>
                                        <option value="Emergency">Emergency</option>
                                        <option value="General Medicine">General Medicine</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="appointmentType">Appointment Type:</label>
                                    <select id="appointmentType" name="appointmentType" required>
                                        <option value="">Select Type</option>
                                        <option value="Consultation">Consultation</option>
                                        <option value="Follow-up">Follow-up</option>
                                        <option value="Check-up">Check-up</option>
                                        <option value="Emergency">Emergency</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="priority">Priority:</label>
                                    <select id="priority" name="priority" required>
                                        <option value="Normal">Normal</option>
                                        <option value="High">High</option>
                                        <option value="Urgent">Urgent</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="reason">Reason for Visit:</label>
                            <textarea id="reason" name="reason" rows="3" placeholder="Brief description of the reason for the appointment..." required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Additional Notes:</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Any additional information or special requirements..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Schedule Appointment</button>
                    </form>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    Appointment Calendar
                </div>
                <div class="card-body">
                    <div class="search-container">
                        <input type="text" id="searchAppointments" class="search-input" placeholder="Search appointments...">
                        <select id="filterAppointments" class="filter-select">
                            <option value="">All Appointments</option>
                            <option value="today">Today</option>
                            <option value="upcoming">Upcoming</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <input type="date" id="dateFilter" class="filter-select">
                    </div>
                    <div id="appointmentsTable">
                        <!-- Appointments table will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Appointment Modal -->
    <div id="editAppointmentModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Edit Appointment</h2>
            </div>
            <div class="modal-body">
                <form id="editAppointmentForm">
                    <input type="hidden" id="editAppointmentId">
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="editPatientName">Patient Name:</label>
                                <input type="text" id="editPatientName" required>
                            </div>
                            <div class="form-group">
                                <label for="editAppointmentDate">Appointment Date:</label>
                                <input type="date" id="editAppointmentDate" required>
                            </div>
                            <div class="form-group">
                                <label for="editAppointmentTime">Appointment Time:</label>
                                <input type="time" id="editAppointmentTime" required>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="editSelectedDoctor">Doctor:</label>
                                <select id="editSelectedDoctor" required>
                                    <option value="">Select Doctor</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editDepartment">Department:</label>
                                <select id="editDepartment" required>
                                    <option value="Cardiology">Cardiology</option>
                                    <option value="Neurology">Neurology</option>
                                    <option value="Pediatrics">Pediatrics</option>
                                    <option value="Emergency">Emergency</option>
                                    <option value="General Medicine">General Medicine</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editStatus">Status:</label>
                                <select id="editStatus" required>
                                    <option value="scheduled">Scheduled</option>
                                    <option value="confirmed">Confirmed</option>
                                    <option value="completed">Completed</option>
                                    <option value="cancelled">Cancelled</option>
                                    <option value="no-show">No Show</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editReason">Reason for Visit:</label>
                        <textarea id="editReason" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="editNotes">Notes:</label>
                        <textarea id="editNotes" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeEditAppointmentModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="updateAppointment()">Update Appointment</button>
            </div>
        </div>
    </div>
    
    <script src="firebase-auth.js"></script>
    <script src="shared.js"></script>
    <script src="appointments.js"></script>
</body>
</html>
