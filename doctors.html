<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor's Workflow - Prince Alex Hospital HMS</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBYfTWtl-N21DxVATxVnhCofgQsVu3xK4M",
            authDomain: "store-e88d9.firebaseapp.com",
            projectId: "store-e88d9",
            storageBucket: "store-e88d9.firebasestorage.app",
            messagingSenderId: "30797525855",
            appId: "1:30797525855:web:335287605ec648f747fcea"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
    </script>
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>üè• Prince Alex Hospital</h1>
                <h2>Hospital Management System (HMS)</h2>
            </div>
            <div class="user-info">
                <h3 class="welcome-message">Welcome User</h3>
                <p>Department</p>
            </div>
        </div>
        
        <div class="main-content">
            <div class="content-header">
                <h1>üë®‚Äç‚öïÔ∏è Doctor's Workflow</h1>
                <p>Patient consultations, examinations, and treatment decisions</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    Incoming Patients
                </div>
                <div class="card-body">
                    <div class="search-container">
                        <input type="text" id="searchPatients" class="search-input" placeholder="Search patients...">
                        <select id="filterPatients" class="filter-select">
                            <option value="">All Patients</option>
                            <option value="triage">From Triage</option>
                            <option value="appointment">Scheduled Appointments</option>
                            <option value="consultation">Active Consultations</option>
                        </select>
                    </div>
                    <div id="incomingPatients">
                        <!-- Incoming patients will be populated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    Consultation Panel
                </div>
                <div class="card-body">
                    <div id="consultationPanel">
                        <p>Select a patient to begin consultation</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    Patient History
                </div>
                <div class="card-body">
                    <div id="patientHistory">
                        <!-- Patient history will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Consultation Modal -->
    <div id="consultationModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Patient Consultation</h2>
            </div>
            <div class="modal-body">
                <div id="consultationForm">
                    <!-- Consultation form will be populated by JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeConsultationModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="saveConsultation()">Save Consultation</button>
            </div>
        </div>
    </div>
    
    <!-- Lab Request Modal -->
    <div id="labRequestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Lab Request</h2>
            </div>
            <div class="modal-body">
                <form id="labRequestForm">
                    <input type="hidden" id="labPatientId">
                    <div class="form-group">
                        <label for="labTestType">Test Type:</label>
                        <select id="labTestType" required>
                            <option value="">Select Test</option>
                            <option value="Blood Test">Blood Test</option>
                            <option value="Urine Test">Urine Test</option>
                            <option value="X-Ray">X-Ray</option>
                            <option value="CT Scan">CT Scan</option>
                            <option value="MRI">MRI</option>
                            <option value="ECG">ECG</option>
                            <option value="Ultrasound">Ultrasound</option>
                            <option value="Biopsy">Biopsy</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="labPriority">Priority:</label>
                        <select id="labPriority" required>
                            <option value="Routine">Routine</option>
                            <option value="Urgent">Urgent</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="labNotes">Notes:</label>
                        <textarea id="labNotes" rows="3" placeholder="Specific instructions or observations..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeLabRequestModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="submitLabRequest()">Submit Request</button>
            </div>
        </div>
    </div>
    
    <!-- Prescription Modal -->
    <div id="prescriptionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Prescription</h2>
            </div>
            <div class="modal-body">
                <form id="prescriptionForm">
                    <input type="hidden" id="prescriptionPatientId">
                    <div class="form-group">
                        <label for="medicationName">Medication:</label>
                        <input type="text" id="medicationName" required placeholder="Medication name">
                    </div>
                    <div class="form-group">
                        <label for="dosage">Dosage:</label>
                        <input type="text" id="dosage" required placeholder="e.g., 500mg">
                    </div>
                    <div class="form-group">
                        <label for="frequency">Frequency:</label>
                        <input type="text" id="frequency" required placeholder="e.g., Twice daily">
                    </div>
                    <div class="form-group">
                        <label for="duration">Duration:</label>
                        <input type="text" id="duration" required placeholder="e.g., 7 days">
                    </div>
                    <div class="form-group">
                        <label for="prescriptionNotes">Notes:</label>
                        <textarea id="prescriptionNotes" rows="3" placeholder="Special instructions..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closePrescriptionModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="submitPrescription()">Submit Prescription</button>
            </div>
        </div>
    </div>
    
    <script src="firebase-auth.js"></script>
    <script src="shared.js"></script>
    <script src="doctors.js"></script>
</body>
</html>
